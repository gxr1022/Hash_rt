GNU gdb (Ubuntu 12.1-0ubuntu1~22.04) 12.1
Copyright (C) 2022 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<https://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word"...
Reading symbols from ./hash_rt...
[?2004h(gdb) b hash_server.h:90
[?2004lBreakpoint 1 at 0x5f0e6: file /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/hash_server.h, line 90.
[?2004h(gdb) r
[?2004lStarting program: /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/build/hash_rt 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
Set fair: 1
Init runtime
Scheduler Thread created
Scheduler Thread created
Runtime initialised
Init time:1739430338
[New Thread 0x7fbfdf3e8640 (LWP 1165684)]
Starting all threads
[New Thread 0x7fbfdebe7640 (LWP 1165685)]
[New Thread 0x7fbfde3e6640 (LWP 1165686)]
[Switching to Thread 0x7fbfdf3e8640 (LWP 1165684)]

Thread 2 "hash_rt" hit Breakpoint 1, HashTableServer::scheduler_loop (this=0x55555561f290) at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/hash_server.h:90
warning: Source file is more recent than executable.
90	                while (!scheduler.producer_start.load())
[?2004h[?2004l[?2004h(gdb) p [7mscheduler.producer_start.load()[27m[C[C[C[C[C[C[C[Cscheduler.producer_start.load()
[?2004lToo few arguments in function call.
[?2004h(gdb) [7m(gdb) p scheduler.producer_start[27m[C[C[C[C[C[C(gdb) p scheduler.producer_start
[?2004lUndefined command: "".  Try "help".
[?2004h(gdb) (gdb) p scheduler.producer_start[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P[1P[1P[1P[1P[1P
[?2004l$1 = std::atomic<bool> = { true }
[?2004h(gdb) n
[?2004l[New Thread 0x7fbfddbe5640 (LWP 1166025)]
94	                for (const auto &req : batch->requests)
[?2004h[?2004l[?2004h(gdb) n
[?2004l96	                    hash_table->insert(req.key, req.value);
[?2004h[?2004l[?2004h(gdb) n
[?2004lBehaviourCore::schedule_many1
Prepare phase duration: 640
Acquire phase duration: 610
Exchange duration: 240
Release phase duration: 90
Process phase duration: 760
97	                    completed_ops++;
[?2004h[?2004l[?2004h(gdb) n
[?2004l94	                for (const auto &req : batch->requests)
[?2004h[?2004l[?2004h(gdb) n
[?2004l96	                    hash_table->insert(req.key, req.value);
[?2004h[?2004l[?2004h(gdb) n
[?2004lBehaviourCore::schedule_many1
Prepare phase duration: 490
Acquire phase duration: 560
Exchange duration: 340
Release phase duration: 90
Process phase duration: 600
97	                    completed_ops++;
[?2004h[?2004l[?2004h(gdb) n
[?2004l94	                for (const auto &req : batch->requests)
[?2004h[?2004l[?2004h(gdb) n
[?2004l96	                    hash_table->insert(req.key, req.value);
[?2004h[?2004l[?2004h(gdb) n
[?2004lBehaviourCore::schedule_many1
Prepare phase duration: 290
Acquire phase duration: 510
Exchange duration: 340
Release phase duration: 80
Process phase duration: 280
97	                    completed_ops++;
[?2004h[?2004l[?2004h(gdb) n
[?2004l94	                for (const auto &req : batch->requests)
[?2004h[?2004l[?2004h(gdb) n
[?2004l96	                    hash_table->insert(req.key, req.value);
[?2004h[?2004l[?2004h(gdb) n
[?2004lBehaviourCore::schedule_many1
Prepare phase duration: 280
Acquire phase duration: 510
Exchange duration: 350
Release phase duration: 60
Process phase duration: 300
97	                    completed_ops++;
[?2004h[?2004l[?2004h(gdb) n
[?2004l94	                for (const auto &req : batch->requests)
[?2004h[?2004l[?2004h(gdb) n
[?2004l100	                Scheduler::get().producer_start.store(false);
[?2004h[?2004l[?2004h(gdb) n
[?2004l108	                    auto current_count = Scheduler::get().completed_count_last_batch.load();
[?2004h[?2004l[?2004h(gdb) n[Kp [K[Kn
[?2004l109	                    if (current_count == 0)
[?2004h[?2004l[?2004h(gdb) p current_count
[?2004l$2 = 0
[?2004h(gdb) n[Kinfo thread
[?2004l  Id   Target Id                                     Frame 
  1    Thread 0x7ffff7a13300 (LWP 1165668) "hash_rt" __futex_abstimed_wait_common64 (private=128, cancel=true, 
    abstime=0x0, op=265, expected=1165686, futex_word=0x7fbfde3e6910) at ./nptl/futex-internal.c:57
* 2    Thread 0x7fbfdf3e8640 (LWP 1165684) "hash_rt" HashTableServer::scheduler_loop (this=0x55555561f290)
    at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/hash_server.h:109
  3    Thread 0x7fbfdebe7640 (LWP 1165685) "hash_rt" 0x00005555555ba29d in std::mersenne_twister_engine<unsigned long, 32ul, 624ul, 397ul, 31ul, 2567483615ul, 11ul, 4294967295ul, 7ul, 2636928640ul, 15ul, 4022730752ul, 18ul, 1812433253ul>::operator() (this=0x7fbfd7ffe0d0) at /usr/include/c++/11/bits/random.tcc:455
  4    Thread 0x7fbfde3e6640 (LWP 1165686) "hash_rt" 0x00007ffff7c06c9b in sched_yield ()
    at ../sysdeps/unix/syscall-template.S:120
  5    Thread 0x7fbfddbe5640 (LWP 1166025) "hash_rt" 0x00007ffff7c06c9b in sched_yield ()
    at ../sysdeps/unix/syscall-template.S:120
[?2004h(gdb) n
[?2004l111	                        bool suc = Scheduler::get().completed_count_last_batch.compare_exchange_strong(current_count, batch_size);
[?2004h[?2004l[?2004h(gdb) n
[?2004lget work duration: 4110
get work duration: 3960
get body duration: 1420
get body duration: 190
run body duration: 7350
run body duration: 3040
release cown duration: 1700
release cown duration: 4840
dealloc behaviour duration: 30
dealloc behaviour duration: 30
dealloc work duration: 78209
dealloc work duration: 73689
get work duration: 600
get body duration: 70
run body duration: 1660
get work duration: 540
release cown duration: 460
dealloc behaviour duration: 30
dealloc work duration: 320
get body duration: 50
run body duration: 1450
release cown duration: 420
dealloc behaviour duration: 30
dealloc work duration: 260
112	                        if (suc)
[?2004h[?2004l[?2004h(gdb) info thread
[?2004l  Id   Target Id                                     Frame 
  1    Thread 0x7ffff7a13300 (LWP 1165668) "hash_rt" __futex_abstimed_wait_common64 (private=128, cancel=true, 
    abstime=0x0, op=265, expected=1165686, futex_word=0x7fbfde3e6910) at ./nptl/futex-internal.c:57
* 2    Thread 0x7fbfdf3e8640 (LWP 1165684) "hash_rt" HashTableServer::scheduler_loop (this=0x55555561f290)
    at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/hash_server.h:112
  3    Thread 0x7fbfdebe7640 (LWP 1165685) "hash_rt" 0x00005555555ba2cd in std::mersenne_twister_engine<unsigned long, 32ul, 624ul, 397ul, 31ul, 2567483615ul, 11ul, 4294967295ul, 7ul, 2636928640ul, 15ul, 4022730752ul, 18ul, 1812433253ul>::operator() (this=0x7fbfd7ffe0d0) at /usr/include/c++/11/bits/random.tcc:459
  4    Thread 0x7fbfde3e6640 (LWP 1165686) "hash_rt" 0x00007ffff7c06c9b in sched_yield ()
    at ../sysdeps/unix/syscall-template.S:120
  5    Thread 0x7fbfddbe5640 (LWP 1166025) "hash_rt" 0x00007ffff7c06c9b in sched_yield ()
    at ../sysdeps/unix/syscall-template.S:120
[?2004h(gdb) thread 2
[?2004l[Switching to thread 2 (Thread 0x7fbfdf3e8640 (LWP 1165684))]
#0  HashTableServer::scheduler_loop (this=0x55555561f290)
    at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/hash_server.h:112
112	                        if (suc)
[?2004h(gdb) p suc
[?2004l$3 = true
[?2004h(gdb) n
[?2004l114	                            goto next1;
[?2004h[?2004l[?2004h(gdb) n
[?2004l120	                batch->requests.clear();
[?2004h[?2004l[?2004h(gdb) n
[?2004l83	        while (running && completed_ops < target_ops)
[?2004h[?2004l[?2004h(gdb) n
[?2004l85	            auto *batch = prepare_new_batch();
[?2004h[?2004l[?2004h(gdb) n
[?2004l86	            current_batch.store(batch, std::memory_order_relaxed);
[?2004h[?2004l[?2004h(gdb) n
[?2004l87	            if (!batch->requests.empty())
[?2004h[?2004l[?2004h(gdb) n
[?2004l89	                size_t batch_size = batch->requests.size();
[?2004h[?2004l[?2004h(gdb) n
[?2004l
Thread 2 "hash_rt" hit Breakpoint 1, HashTableServer::scheduler_loop (this=0x55555561f290) at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/hash_server.h:90
90	                while (!scheduler.producer_start.load())
[?2004h[?2004l[?2004h(gdb) p [7mscheduler.producer_start.load()[27m[C[C[C[C[C[C[C[Cscheduler.producer_start.load()
[?2004lToo few arguments in function call.
[?2004h(gdb) p scheduler.producer_start.load()[K[K[K[K[K[K[K
[?2004l$4 = std::atomic<bool> = { false }
[?2004h(gdb) n
[?2004l92	                    std::this_thread::yield();
[?2004h[?2004l[?2004h(gdb) n
[?2004l90	                while (!scheduler.producer_start.load())
[?2004h[?2004l[?2004h(gdb) n
[?2004l92	                    std::this_thread::yield();
[?2004h[?2004l[?2004h(gdb) n
[?2004l90	                while (!scheduler.producer_start.load())
[?2004h[?2004l[?2004h(gdb) n
[?2004l92	                    std::this_thread::yield();
[?2004h[?2004l[?2004h(gdb) n
[?2004l90	                while (!scheduler.producer_start.load())
[?2004h[?2004l[?2004h(gdb) info thread
[?2004l  Id   Target Id                                     Frame 
  1    Thread 0x7ffff7a13300 (LWP 1165668) "hash_rt" __futex_abstimed_wait_common64 (private=128, cancel=true, 
    abstime=0x0, op=265, expected=1165686, futex_word=0x7fbfde3e6910) at ./nptl/futex-internal.c:57
* 2    Thread 0x7fbfdf3e8640 (LWP 1165684) "hash_rt" HashTableServer::scheduler_loop (this=0x55555561f290)
    at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/hash_server.h:90
  3    Thread 0x7fbfdebe7640 (LWP 1165685) "hash_rt" 0x00005555555b36aa in HashTableClient::generate_random_string (
    this=0x7fbfd07fe040, 
    buffer=0x7fbfdebe5140 "zqrpazxgsbmagzobnmotpcyygaxeavtcnbpttwttieetaxuehehdzapnbeupjbecmolidwgfubeqgtlbkmizcldihsucbqghozx", length=100) at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/hash_client.h:19
  4    Thread 0x7fbfde3e6640 (LWP 1165686) "hash_rt" 0x00007ffff7c06c9b in sched_yield ()
    at ../sysdeps/unix/syscall-template.S:120
  5    Thread 0x7fbfddbe5640 (LWP 1166025) "hash_rt" 0x00007ffff7c06c9b in sched_yield ()
    at ../sysdeps/unix/syscall-template.S:120
[?2004h(gdb) thread 4
[?2004l[Switching to thread 4 (Thread 0x7fbfde3e6640 (LWP 1165686))]
#0  0x00007ffff7c06c9b in sched_yield () at ../sysdeps/unix/syscall-template.S:120
120	../sysdeps/unix/syscall-template.S: No such file or directory.
[?2004h(gdb) bt
[?2004l#0  0x00007ffff7c06c9b in sched_yield () at ../sysdeps/unix/syscall-template.S:120
#1  0x00005555555a5ae1 in __gthread_yield () at /usr/include/x86_64-linux-gnu/c++/11/bits/gthr-default.h:693
#2  0x00005555555a8152 in std::this_thread::yield () at /usr/include/c++/11/bits/std_thread.h:329
#3  0x00005555555d36fc in verona::rt::SchedulerThread::run_inner<>(void (*)()) (this=0x55555561ef80, 
    startup=0x5555555adb76 <verona::rt::nop()>)
    at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/verona-rt/src/rt/./cpp/../sched/../sched/schedulerthread.h:214
#4  0x00005555555cd0ad in verona::rt::SchedulerThread::run<>(verona::rt::SchedulerThread*, void (*)()) (
    t=0x55555561ef80, startup=0x5555555adb76 <verona::rt::nop()>)
    at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/verona-rt/src/rt/./cpp/../sched/../sched/schedulerthread.h:134
#5  0x00005555555d3b5c in verona::rt::ThreadPoolBuilder::run_with_affinity<verona::rt::SchedulerThread*, void (*)()> (
    affinity=2, body=0x5555555cd086 <verona::rt::SchedulerThread::run<>(verona::rt::SchedulerThread*, void (*)())>)
    at /mnt/nvme0/home/gxr/Myhash_boc/Hash_rt/include/verona-rt/src/rt/./cpp/../sched/../sched/../pal/threadpoolbuilder.h:39
#6  0x00005555555e73a1 in std::__invoke_impl<void, void (*)(unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()), unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()> (
    __f=@0x55555561f708: 0x5555555d3b20 <verona::rt::ThreadPoolBuilder::run_with_affinity<verona::rt::SchedulerThread*, void (*)()>(unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)())>) at /usr/include/c++/11/bits/invoke.h:61
#7  0x00005555555e7234 in std::__invoke<void (*)(unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()), unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()> (
    __fn=@0x55555561f708: 0x5555555d3b20 <verona::rt::ThreadPoolBuilder::run_with_affinity<verona::rt::SchedulerThread*, void (*)()>(unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)())>) at /usr/include/c++/11/bits/invoke.h:96
#8  0x00005555555e70d3 in std::thread::_Invoker<std::tuple<void (*)(unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()), unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()> >::_M_invoke<0ul, 1ul, 2ul, 3ul, 4ul> (this=0x55555561f6e8)
    at /usr/include/c++/11/bits/std_thread.h:259
#9  0x00005555555e7034 in std::thread::_Invoker<std::tuple<void (*)(unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()), unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()> >::operator() (this=0x55555561f6e8)
    at /usr/include/c++/11/bits/std_thread.h:266
#10 0x00005555555e7014 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()), unsigned long, void (*)(verona::rt::SchedulerThread*, void (*)()), verona::rt::SchedulerThread*, void (*)()> > >::_M_run (this=0x55555561f6e0)
    at /usr/include/c++/11/bits/std_thread.h:211
#11 0x00007ffff7e23253 in ?? () from /lib/x86_64-linux-gnu/libstdc++.so.6
#12 0x00007ffff7b92ac3 in start_thread (arg=<optimized out>) at ./nptl/pthread_create.c:442
#13 0x00007ffff7c24850 in clone3 () at ../sysdeps/unix/sysv/linux/x86_64/clone3.S:81
[?2004h(gdb) q[Kq
[?2004l[?2004hA debugging session is active.

	Inferior 1 [process 1165668] will be killed.

Quit anyway? (y or n) y
[?2004l